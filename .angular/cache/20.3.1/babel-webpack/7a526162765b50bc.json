{"ast":null,"code":"import { HttpResponse } from '@angular/common/http';\nimport { of } from 'rxjs';\nimport { delay } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nconst db = {\n  assets: [{\n    id: 1,\n    name: 'Checking',\n    amount: 4200\n  }, {\n    id: 2,\n    name: 'Brokerage',\n    amount: 18500\n  }],\n  debts: [{\n    id: 1,\n    name: 'Visa',\n    balance: 1200,\n    apr: 22.99,\n    min_payment: 45\n  }, {\n    id: 2,\n    name: 'Auto Loan',\n    balance: 9800,\n    apr: 5.2,\n    min_payment: 275\n  }],\n  goals: [{\n    id: 1,\n    name: 'Emergency Fund',\n    target_amount: 15000,\n    saved: 4200\n  }],\n  income: [{\n    id: 1,\n    source: 'Salary',\n    cadence: 'biweekly',\n    net_amount: 3200\n  }],\n  obligations: [{\n    id: 1,\n    name: 'Rent',\n    cadence: 'monthly',\n    amount: 2200\n  }],\n  summary: {\n    netWorth: 4200 + 18500 - (1200 + 9800),\n    savingsRate: 0.22,\n    dti: 0.18,\n    runwayMonths: 4.2\n  }\n};\nfunction parse(url) {\n  const m = url.match(/^\\/api\\/([^\\/]+)(?:\\/(\\d+))?/);\n  if (!m) return null;\n  const [, coll, id] = m;\n  return {\n    coll,\n    id: id ? Number(id) : null\n  };\n}\nexport class MockBackendInterceptor {\n  intercept(req, next) {\n    if (!req.url.startsWith('/api/')) return next.handle(req);\n    const parsed = parse(req.url);\n    if (!parsed) return next.handle(req);\n    const {\n      coll,\n      id\n    } = parsed;\n    // Collections that exist\n    if (!(coll in db)) return of(new HttpResponse({\n      status: 404\n    })).pipe(delay(100));\n    // GET collection or item\n    if (req.method === 'GET') {\n      const body = id == null ? db[coll] : db[coll].find(x => x.id === id);\n      return of(new HttpResponse({\n        status: 200,\n        body\n      })).pipe(delay(150));\n    }\n    // POST create\n    if (req.method === 'POST') {\n      const items = db[coll];\n      const newId = items.length ? Math.max(...items.map(x => x.id)) + 1 : 1;\n      const item = {\n        id: newId,\n        ...req.body\n      };\n      items.push(item);\n      return of(new HttpResponse({\n        status: 201,\n        body: item\n      })).pipe(delay(150));\n    }\n    // PUT update\n    if (req.method === 'PUT' && id != null) {\n      const items = db[coll];\n      const idx = items.findIndex(x => x.id === id);\n      if (idx === -1) return of(new HttpResponse({\n        status: 404\n      })).pipe(delay(100));\n      items[idx] = {\n        ...items[idx],\n        ...req.body,\n        id\n      };\n      return of(new HttpResponse({\n        status: 200,\n        body: items[idx]\n      })).pipe(delay(150));\n    }\n    // DELETE\n    if (req.method === 'DELETE' && id != null) {\n      const items = db[coll];\n      const idx = items.findIndex(x => x.id === id);\n      if (idx === -1) return of(new HttpResponse({\n        status: 404\n      })).pipe(delay(100));\n      items.splice(idx, 1);\n      return of(new HttpResponse({\n        status: 204\n      })).pipe(delay(120));\n    }\n    return next.handle(req);\n  }\n  static {\n    this.ɵfac = function MockBackendInterceptor_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || MockBackendInterceptor)();\n    };\n  }\n  static {\n    this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n      token: MockBackendInterceptor,\n      factory: MockBackendInterceptor.ɵfac\n    });\n  }\n}","map":{"version":3,"names":["HttpResponse","of","delay","db","assets","id","name","amount","debts","balance","apr","min_payment","goals","target_amount","saved","income","source","cadence","net_amount","obligations","summary","netWorth","savingsRate","dti","runwayMonths","parse","url","m","match","coll","Number","MockBackendInterceptor","intercept","req","next","startsWith","handle","parsed","status","pipe","method","body","find","x","items","newId","length","Math","max","map","item","push","idx","findIndex","splice","factory","ɵfac"],"sources":["/Users/saxis/dev/angular_projects/ha-kings/src/app/mock/mock-backend.interceptor.ts"],"sourcesContent":["// src/app/mock/mock-backend.interceptor.ts\nimport { Injectable } from '@angular/core';\nimport {\n  HttpEvent, HttpHandler, HttpInterceptor, HttpRequest, HttpResponse\n} from '@angular/common/http';\nimport { Observable, of } from 'rxjs';\nimport { delay } from 'rxjs/operators';\n\ntype DB = {\n  assets: any[]; debts: any[]; goals: any[]; income: any[]; obligations: any[]; summary: any;\n};\n\nconst db: DB = {\n  assets: [\n    { id: 1, name: 'Checking', amount: 4200 },\n    { id: 2, name: 'Brokerage', amount: 18500 },\n  ],\n  debts: [\n    { id: 1, name: 'Visa', balance: 1200, apr: 22.99, min_payment: 45 },\n    { id: 2, name: 'Auto Loan', balance: 9800, apr: 5.2, min_payment: 275 },\n  ],\n  goals: [{ id: 1, name: 'Emergency Fund', target_amount: 15000, saved: 4200 }],\n  income: [{ id: 1, source: 'Salary', cadence: 'biweekly', net_amount: 3200 }],\n  obligations: [{ id: 1, name: 'Rent', cadence: 'monthly', amount: 2200 }],\n  summary: { netWorth: 4200 + 18500 - (1200 + 9800), savingsRate: 0.22, dti: 0.18, runwayMonths: 4.2 },\n};\n\nfunction parse(url: string) {\n  const m = url.match(/^\\/api\\/([^\\/]+)(?:\\/(\\d+))?/);\n  if (!m) return null;\n  const [, coll, id] = m;\n  return { coll, id: id ? Number(id) : null };\n}\n\n@Injectable()\nexport class MockBackendInterceptor implements HttpInterceptor {\n  intercept(req: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\n    if (!req.url.startsWith('/api/')) return next.handle(req);\n\n    const parsed = parse(req.url);\n    if (!parsed) return next.handle(req);\n    const { coll, id } = parsed as { coll: keyof DB; id: number | null };\n\n    // Collections that exist\n    if (!(coll in db)) return of(new HttpResponse({ status: 404 })).pipe(delay(100));\n\n    // GET collection or item\n    if (req.method === 'GET') {\n      const body = id == null ? (db as any)[coll] : (db as any)[coll].find((x: any) => x.id === id);\n      return of(new HttpResponse({ status: 200, body })).pipe(delay(150));\n    }\n\n    // POST create\n    if (req.method === 'POST') {\n      const items = (db as any)[coll];\n      const newId = items.length ? Math.max(...items.map((x: any) => x.id)) + 1 : 1;\n      const item = { id: newId, ...req.body };\n      items.push(item);\n      return of(new HttpResponse({ status: 201, body: item })).pipe(delay(150));\n    }\n\n    // PUT update\n    if (req.method === 'PUT' && id != null) {\n      const items = (db as any)[coll];\n      const idx = items.findIndex((x: any) => x.id === id);\n      if (idx === -1) return of(new HttpResponse({ status: 404 })).pipe(delay(100));\n      items[idx] = { ...items[idx], ...req.body, id };\n      return of(new HttpResponse({ status: 200, body: items[idx] })).pipe(delay(150));\n    }\n\n    // DELETE\n    if (req.method === 'DELETE' && id != null) {\n      const items = (db as any)[coll];\n      const idx = items.findIndex((x: any) => x.id === id);\n      if (idx === -1) return of(new HttpResponse({ status: 404 })).pipe(delay(100));\n      items.splice(idx, 1);\n      return of(new HttpResponse({ status: 204 })).pipe(delay(120));\n    }\n\n    return next.handle(req);\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}