{"ast":null,"code":"import { EventEmitter } from '@angular/core';\nimport { Sortable } from '@shopify/draggable';\nimport * as i0 from \"@angular/core\";\nexport class SortableDirective {\n  constructor(el) {\n    this.el = el;\n    // @Output() start = new EventEmitter();\n    // @Output() sort  = new EventEmitter();\n    // @Output() sorted = new EventEmitter();\n    this.stop = new EventEmitter();\n  }\n  ngAfterViewInit() {\n    this.sortable = new Sortable(this.el.nativeElement, {\n      draggable: 'li'\n    });\n    // this.sortable.on('sortable:start', e => this.start.emit(e));\n    // this.sortable.on('sortable.sort', e => this.sortable.emit(e));\n    // this.sortable.on('sortable.sorted', e => this.sorted.emit(e));\n    this.sortable.on('sortable:stop', e => this.handleStop(e));\n  }\n  handleStop(e) {\n    console.log(e);\n    const {\n      newIndex,\n      oldIndex\n    } = e;\n    const next = this.data;\n    const moved = next.splice(oldIndex, 1);\n    next.splice(newIndex, 0, moved[0]);\n    this.stop.emit(next);\n  }\n  static {\n    this.ɵfac = function SortableDirective_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || SortableDirective)(i0.ɵɵdirectiveInject(i0.ElementRef));\n    };\n  }\n  static {\n    this.ɵdir = /*@__PURE__*/i0.ɵɵdefineDirective({\n      type: SortableDirective,\n      selectors: [[\"\", \"sortable\", \"\"]],\n      inputs: {\n        data: \"data\"\n      },\n      outputs: {\n        stop: \"stop\"\n      }\n    });\n  }\n}","map":{"version":3,"names":["EventEmitter","Sortable","SortableDirective","constructor","el","stop","ngAfterViewInit","sortable","nativeElement","draggable","on","e","handleStop","console","log","newIndex","oldIndex","next","data","moved","splice","emit","i0","ɵɵdirectiveInject","ElementRef","selectors","inputs","outputs"],"sources":["/Users/saxis/dev/angular_projects/ha-kings/src/app/core/sortable.directive.ts"],"sourcesContent":["import { Directive, ElementRef, AfterViewInit, Input, Output, EventEmitter } from '@angular/core';\nimport { Sortable } from '@shopify/draggable';\n\n@Directive({\n  // tslint:disable-next-line:directive-selector\n  selector: '[sortable]'\n})\nexport class SortableDirective implements AfterViewInit {\n  @Input() data: any[];\n\n  // @Output() start = new EventEmitter();\n  // @Output() sort  = new EventEmitter();\n  // @Output() sorted = new EventEmitter();\n  @Output() stop = new EventEmitter();\n\n  sortable: Sortable;\n\n  constructor(private el: ElementRef) { }\n\n  ngAfterViewInit() {\n    this.sortable = new Sortable(this.el.nativeElement, {\n      draggable: 'li'\n    });\n\n    // this.sortable.on('sortable:start', e => this.start.emit(e));\n    // this.sortable.on('sortable.sort', e => this.sortable.emit(e));\n    // this.sortable.on('sortable.sorted', e => this.sorted.emit(e));\n\n    this.sortable.on('sortable:stop', e => this.handleStop(e));\n\n  }\n\n  handleStop(e) {\n    console.log(e);\n    const { newIndex, oldIndex } = e;\n    const next = this.data;\n    const moved = next.splice(oldIndex, 1) ;\n    next.splice(newIndex, 0, moved[0]);\n\n    this.stop.emit(next);\n  }\n\n}\n"],"mappings":"AAAA,SAA8DA,YAAY,QAAQ,eAAe;AACjG,SAASC,QAAQ,QAAQ,oBAAoB;;AAM7C,OAAM,MAAOC,iBAAiB;EAU5BC,YAAoBC,EAAc;IAAd,KAAAA,EAAE,GAAFA,EAAE;IAPtB;IACA;IACA;IACU,KAAAC,IAAI,GAAG,IAAIL,YAAY,EAAE;EAIG;EAEtCM,eAAeA,CAAA;IACb,IAAI,CAACC,QAAQ,GAAG,IAAIN,QAAQ,CAAC,IAAI,CAACG,EAAE,CAACI,aAAa,EAAE;MAClDC,SAAS,EAAE;KACZ,CAAC;IAEF;IACA;IACA;IAEA,IAAI,CAACF,QAAQ,CAACG,EAAE,CAAC,eAAe,EAAEC,CAAC,IAAI,IAAI,CAACC,UAAU,CAACD,CAAC,CAAC,CAAC;EAE5D;EAEAC,UAAUA,CAACD,CAAC;IACVE,OAAO,CAACC,GAAG,CAACH,CAAC,CAAC;IACd,MAAM;MAAEI,QAAQ;MAAEC;IAAQ,CAAE,GAAGL,CAAC;IAChC,MAAMM,IAAI,GAAG,IAAI,CAACC,IAAI;IACtB,MAAMC,KAAK,GAAGF,IAAI,CAACG,MAAM,CAACJ,QAAQ,EAAE,CAAC,CAAC;IACtCC,IAAI,CAACG,MAAM,CAACL,QAAQ,EAAE,CAAC,EAAEI,KAAK,CAAC,CAAC,CAAC,CAAC;IAElC,IAAI,CAACd,IAAI,CAACgB,IAAI,CAACJ,IAAI,CAAC;EACtB;;;uCAjCWf,iBAAiB,EAAAoB,EAAA,CAAAC,iBAAA,CAAAD,EAAA,CAAAE,UAAA;IAAA;EAAA;;;YAAjBtB,iBAAiB;MAAAuB,SAAA;MAAAC,MAAA;QAAAR,IAAA;MAAA;MAAAS,OAAA;QAAAtB,IAAA;MAAA;IAAA;EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}