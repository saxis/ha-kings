{"ast":null,"code":"// src/app/mock/mock-backend.interceptor.ts\nimport { HttpResponse } from '@angular/common/http';\nimport { of } from 'rxjs';\nimport { delay } from 'rxjs/operators';\nconst owner = 'local-demo';\nconst db = {\n  assets: [{\n    id: 1,\n    asset_denomination: 'Checking',\n    balance: 4200,\n    purchase_price_per_full_unit: 1,\n    current_price_per_full_unit: 1,\n    purchase_val: 4200,\n    current_val: 4200,\n    owner\n  }, {\n    id: 2,\n    asset_denomination: 'Brokerage',\n    balance: 10,\n    purchase_price_per_full_unit: 1500,\n    current_price_per_full_unit: 1850,\n    purchase_val: 15000,\n    current_val: 18500,\n    owner\n  }],\n  debts: [{\n    id: 1,\n    biller: 'Visa',\n    principal_balance: 1200,\n    past_due_amount: 0,\n    total_amount_due: 45,\n    interest_rate: 22.99,\n    owner\n  }, {\n    id: 2,\n    biller: 'Auto Loan',\n    principal_balance: 9800,\n    total_amount_due: 275,\n    interest_rate: 5.2,\n    payoff_amount: 9800,\n    owner\n  }],\n  desires: [{\n    id: 1,\n    name: 'Noise-cancelling headphones',\n    amount: 299,\n    fulfilled: false,\n    owner\n  }, {\n    id: 2,\n    name: 'Weekend trip',\n    amount: 600,\n    fulfilled: false,\n    owner\n  }],\n  income: [{\n    id: 1,\n    source: 'Salary',\n    date: '2025-09-01',\n    amount: 3200,\n    owner\n  }, {\n    id: 2,\n    source: 'Freelance',\n    date: '2025-09-07',\n    amount: 800,\n    owner\n  }],\n  obligations: [{\n    id: 1,\n    name: 'Rent',\n    cadence: 'monthly',\n    amount: 2200,\n    owner\n  }, {\n    id: 2,\n    name: 'Internet',\n    cadence: 'monthly',\n    amount: 80,\n    owner\n  }],\n  summary: {\n    netWorth: 4200 + 18500 - (1200 + 9800),\n    savingsRate: 0.22,\n    dti: 0.18,\n    runwayMonths: 4.2\n  }\n};\nfunction parse(url) {\n  const m = url.match(/^\\/api\\/([^/]+)(?:\\/(\\d+))?/);\n  if (!m) return null;\n  const [, coll, id] = m;\n  return {\n    coll: coll,\n    id: id ? Number(id) : null\n  };\n}\nexport const mockBackendInterceptor = (req, next) => {\n  if (!req.url.startsWith('/api/')) return next(req);\n  const parsed = parse(req.url);\n  if (!parsed) return next(req);\n  const {\n    coll,\n    id\n  } = parsed;\n  if (!(coll in db)) return of(new HttpResponse({\n    status: 404\n  })).pipe(delay(50));\n  // GET collection or item\n  if (req.method === 'GET') {\n    const body = id == null ? db[coll] : db[coll].find(x => x.id === id);\n    return of(new HttpResponse({\n      status: 200,\n      body\n    })).pipe(delay(120));\n  }\n  // POST create\n  if (req.method === 'POST') {\n    const items = db[coll];\n    const newId = items.length ? Math.max(...items.map(x => x.id)) + 1 : 1;\n    const b = req.body ?? {};\n    const item = {\n      id: newId,\n      ...b\n    };\n    items.push(item);\n    return of(new HttpResponse({\n      status: 201,\n      body: item\n    })).pipe(delay(120));\n  }\n  // PUT update\n  if (req.method === 'PUT' && id != null) {\n    const items = db[coll];\n    const idx = items.findIndex(x => x.id === id);\n    if (idx === -1) return of(new HttpResponse({\n      status: 404\n    })).pipe(delay(50));\n    const b2 = req.body ?? {};\n    items[idx] = {\n      ...items[idx],\n      ...b2,\n      id\n    };\n    return of(new HttpResponse({\n      status: 200,\n      body: items[idx]\n    })).pipe(delay(120));\n  }\n  // DELETE\n  if (req.method === 'DELETE' && id != null) {\n    const items = db[coll];\n    const idx = items.findIndex(x => x.id === id);\n    if (idx === -1) return of(new HttpResponse({\n      status: 404\n    })).pipe(delay(50));\n    items.splice(idx, 1);\n    return of(new HttpResponse({\n      status: 204\n    })).pipe(delay(90));\n  }\n  return next(req);\n};","map":{"version":3,"names":["HttpResponse","of","delay","owner","db","assets","id","asset_denomination","balance","purchase_price_per_full_unit","current_price_per_full_unit","purchase_val","current_val","debts","biller","principal_balance","past_due_amount","total_amount_due","interest_rate","payoff_amount","desires","name","amount","fulfilled","income","source","date","obligations","cadence","summary","netWorth","savingsRate","dti","runwayMonths","parse","url","m","match","coll","Number","mockBackendInterceptor","req","next","startsWith","parsed","status","pipe","method","body","find","x","items","newId","length","Math","max","map","b","item","push","idx","findIndex","b2","splice"],"sources":["/Users/saxis/dev/angular_projects/ha-kings/src/app/mock/mock-backend.interceptor.ts"],"sourcesContent":["// src/app/mock/mock-backend.interceptor.ts\nimport { HttpInterceptorFn, HttpResponse } from '@angular/common/http';\nimport { of } from 'rxjs';\nimport { delay } from 'rxjs/operators';\n\ntype Id = number;\n\nexport interface Asset {\n  id: Id; asset_denomination: string; balance: number;\n  purchase_price_per_full_unit: number; current_price_per_full_unit: number;\n  purchase_val: number; current_val: number; owner: string;\n}\nexport interface Debt {\n  id: Id; biller: string; principal_balance: number;\n  original_financed_amount?: number; due_date?: string;\n  past_due_amount?: number; total_amount_due?: number;\n  interest_rate?: number; payoff_amount?: number; owner: string;\n}\nexport interface Desire {\n  id: Id; name: string; detail?: string; year?: number;\n  amount: number; fulfilled: boolean; donated?: boolean; recipient?: string; owner: string;\n}\nexport interface Earning {\n  id: Id; source: string; date?: string; amount: number; owner: string;\n}\nexport interface Obligation {\n  id: Id; name: string; cadence: 'monthly' | 'weekly' | 'yearly'; amount: number; owner: string;\n}\nexport interface Summary {\n  netWorth: number; savingsRate: number; dti: number; runwayMonths: number;\n}\ntype DB = {\n  assets: Asset[]; debts: Debt[]; desires: Desire[]; income: Earning[];\n  obligations: Obligation[]; summary: Summary;\n};\n\nconst owner = 'local-demo';\n\nconst db: DB = {\n  assets: [\n    { id: 1, asset_denomination: 'Checking', balance: 4200, purchase_price_per_full_unit: 1, current_price_per_full_unit: 1, purchase_val: 4200, current_val: 4200, owner },\n    { id: 2, asset_denomination: 'Brokerage', balance: 10, purchase_price_per_full_unit: 1500, current_price_per_full_unit: 1850, purchase_val: 15000, current_val: 18500, owner }\n  ],\n  debts: [\n    { id: 1, biller: 'Visa', principal_balance: 1200, past_due_amount: 0, total_amount_due: 45, interest_rate: 22.99, owner },\n    { id: 2, biller: 'Auto Loan', principal_balance: 9800, total_amount_due: 275, interest_rate: 5.2, payoff_amount: 9800, owner }\n  ],\n  desires: [\n    { id: 1, name: 'Noise-cancelling headphones', amount: 299, fulfilled: false, owner },\n    { id: 2, name: 'Weekend trip', amount: 600, fulfilled: false, owner }\n  ],\n  income: [\n    { id: 1, source: 'Salary', date: '2025-09-01', amount: 3200, owner },\n    { id: 2, source: 'Freelance', date: '2025-09-07', amount: 800, owner }\n  ],\n  obligations: [\n    { id: 1, name: 'Rent', cadence: 'monthly', amount: 2200, owner },\n    { id: 2, name: 'Internet', cadence: 'monthly', amount: 80, owner }\n  ],\n  summary: { netWorth: 4200 + 18500 - (1200 + 9800), savingsRate: 0.22, dti: 0.18, runwayMonths: 4.2 }\n};\n\nfunction parse(url: string) {\n  const m = url.match(/^\\/api\\/([^/]+)(?:\\/(\\d+))?/);\n  if (!m) return null;\n  const [, coll, id] = m;\n  return { coll: coll as keyof DB, id: id ? Number(id) : null };\n}\n\nexport const mockBackendInterceptor: HttpInterceptorFn = (req, next) => {\n  if (!req.url.startsWith('/api/')) return next(req);\n  const parsed = parse(req.url);\n  if (!parsed) return next(req);\n\n  const { coll, id } = parsed;\n\n  if (!(coll in db)) return of(new HttpResponse({ status: 404 })).pipe(delay(50));\n\n  // GET collection or item\n  if (req.method === 'GET') {\n    const body =\n      id == null\n        ? (db as any)[coll]\n        : (db as any)[coll].find((x: any) => x.id === id);\n    return of(new HttpResponse({ status: 200, body })).pipe(delay(120));\n  }\n\n  // POST create\n  if (req.method === 'POST') {\n    const items = (db as any)[coll] as Array<{ id: Id }>;\n    const newId = items.length ? Math.max(...items.map((x: any) => x.id)) + 1 : 1;\n    const b = (req.body as Record<string, any>) ?? {};\n    const item = { id: newId, ...b };\n    items.push(item as any);\n    return of(new HttpResponse({ status: 201, body: item })).pipe(delay(120));\n  }\n\n  // PUT update\n  if (req.method === 'PUT' && id != null) {\n    const items = (db as any)[coll] as Array<Record<string, any>>;\n    const idx = items.findIndex((x: any) => x.id === id);\n    if (idx === -1) return of(new HttpResponse({ status: 404 })).pipe(delay(50));\n    const b2 = (req.body as Record<string, any>) ?? {};\n    items[idx] = { ...items[idx], ...b2, id };\n    return of(new HttpResponse({ status: 200, body: items[idx] })).pipe(delay(120));\n  }\n\n  // DELETE\n  if (req.method === 'DELETE' && id != null) {\n    const items = (db as any)[coll] as Array<Record<string, any>>;\n    const idx = items.findIndex((x: any) => x.id === id);\n    if (idx === -1) return of(new HttpResponse({ status: 404 })).pipe(delay(50));\n    items.splice(idx, 1);\n    return of(new HttpResponse({ status: 204 })).pipe(delay(90));\n  }\n\n  return next(req);\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}