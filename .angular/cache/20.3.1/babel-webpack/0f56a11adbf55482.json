{"ast":null,"code":"import { __esDecorate, __runInitializers } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { Debt } from '../../models/debt.model';\nimport { map } from 'rxjs/operators';\nlet DebtsComponent = (() => {\n  let _classDecorators = [Component({\n    selector: 'app-debts',\n    templateUrl: './debts.component.html',\n    styleUrls: ['./debts.component.sass']\n  })];\n  let _classDescriptor;\n  let _classExtraInitializers = [];\n  let _classThis;\n  var DebtsComponent = class {\n    static {\n      _classThis = this;\n    }\n    static {\n      const _metadata = typeof Symbol === \"function\" && Symbol.metadata ? Object.create(null) : void 0;\n      __esDecorate(null, _classDescriptor = {\n        value: _classThis\n      }, _classDecorators, {\n        kind: \"class\",\n        name: _classThis.name,\n        metadata: _metadata\n      }, null, _classExtraInitializers);\n      DebtsComponent = _classThis = _classDescriptor.value;\n      if (_metadata) Object.defineProperty(_classThis, Symbol.metadata, {\n        enumerable: true,\n        configurable: true,\n        writable: true,\n        value: _metadata\n      });\n      __runInitializers(_classThis, _classExtraInitializers);\n    }\n    constructor(afs, as) {\n      this.afs = afs;\n      this.as = as;\n      this.as.afAuth.authState.subscribe(user => {\n        if (user) {\n          this.userId = user.uid;\n        }\n      });\n    }\n    ngOnInit() {\n      // Need to get the current month and then add a where clause for the current month only\n      this.debtsCollection = this.afs.collection('debts', ref => ref.where('owner', '==', this.userId));\n      this.debtsList$ = this.debtsCollection.snapshotChanges().pipe(map(actions => {\n        return actions.map(a => {\n          const data = a.payload.doc.data();\n          const id = a.payload.doc.id;\n          return {\n            id,\n            ...data\n          };\n        });\n      }));\n    }\n    removeDebt(debt) {\n      const doc = this.afs.doc(`debts/${debt.id}`);\n      doc.delete();\n    }\n    onSubmit(f) {\n      const debt = new Debt(f.value.biller, f.value.original_financed_amount, f.value.principal_balance, f.value.due_date, f.value.past_due_amount, f.value.total_amount_due, f.value.interest_rate, f.value.payoff_amount, this.userId);\n      const data = JSON.parse(JSON.stringify(debt));\n      this.debtsCollection.add(data);\n      f.reset();\n    }\n  };\n  return DebtsComponent = _classThis;\n})();\nexport { DebtsComponent };","map":{"version":3,"names":["Component","Debt","map","DebtsComponent","selector","templateUrl","styleUrls","__esDecorate","_classDescriptor","value","_classThis","_classDecorators","kind","name","metadata","_metadata","_classExtraInitializers","__runInitializers","constructor","afs","as","afAuth","authState","subscribe","user","userId","uid","ngOnInit","debtsCollection","collection","ref","where","debtsList$","snapshotChanges","pipe","actions","a","data","payload","doc","id","removeDebt","debt","delete","onSubmit","f","biller","original_financed_amount","principal_balance","due_date","past_due_amount","total_amount_due","interest_rate","payoff_amount","JSON","parse","stringify","add","reset"],"sources":["/Users/saxis/dev/angular_projects/ha-kings/src/app/debts/debts.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { Debt } from '../../models/debt.model';\nimport { NgForm } from '@angular/forms';\nimport { AngularFirestore, AngularFirestoreCollection } from '@angular/fire/firestore';\nimport { Observable } from 'rxjs';\nimport { AuthService } from '../core/auth.service';\nimport { map } from 'rxjs/operators';\n\n@Component({\n  selector: 'app-debts',\n  templateUrl: './debts.component.html',\n  styleUrls: ['./debts.component.sass']\n})\nexport class DebtsComponent implements OnInit {\n  debtsCollection: AngularFirestoreCollection<Debt>;\n  debtsList$: Observable<Debt[]>;\n  userId: string;\n\n  constructor(private afs: AngularFirestore, private as: AuthService) {\n    this.as.afAuth.authState.subscribe(user => {\n      if (user) {\n        this.userId = user.uid;\n      }\n    });\n  }\n\n  ngOnInit() {\n    // Need to get the current month and then add a where clause for the current month only\n\n    this.debtsCollection = this.afs.collection('debts', ref => ref.where('owner', '==', this.userId));\n    this.debtsList$ = this.debtsCollection.snapshotChanges().pipe(\n      map(actions => {\n        return actions.map(a => {\n          const data = a.payload.doc.data() as Debt;\n          const id = a.payload.doc.id;\n          return { id, ...data };\n        });\n      })\n    );\n  }\n\n  removeDebt(debt) {\n    const doc = this.afs.doc(`debts/${debt.id}`);\n    doc.delete();\n  }\n\n  onSubmit(f: NgForm) {\n    const debt = new Debt(f.value.biller, f.value.original_financed_amount, f.value.principal_balance,\n      f.value.due_date, f.value.past_due_amount, f.value.total_amount_due, f.value.interest_rate, f.value.payoff_amount, this.userId);\n\n    const data = JSON.parse(JSON.stringify(debt));\n\n    this.debtsCollection.add(data);\n\n    f.reset();\n  }\n\n}\n"],"mappings":";AAAA,SAASA,SAAS,QAAgB,eAAe;AACjD,SAASC,IAAI,QAAQ,yBAAyB;AAK9C,SAASC,GAAG,QAAQ,gBAAgB;IAOvBC,cAAc;0BAL1BH,SAAS,CAAC;IACTI,QAAQ,EAAE,WAAW;IACrBC,WAAW,EAAE,wBAAwB;IACrCC,SAAS,EAAE,CAAC,wBAAwB;GACrC,CAAC;;;;;;;;;;MACFC,YAAA,OAAAC,gBAAA;QAAAC,KAAA,EAAAC;MAAA,GAAAC,gBAAA;QAAAC,IAAA;QAAAC,IAAA,EAAAH,UAAA,CAAAG,IAAA;QAAAC,QAAA,EAAAC;MAAA,SAAAC,uBAAA;;;;;;;;MAAaC,iBAAA,CAAAP,UAAA,EAAAM,uBAAA;;IAKXE,YAAoBC,GAAqB,EAAUC,EAAe;MAA9C,KAAAD,GAAG,GAAHA,GAAG;MAA4B,KAAAC,EAAE,GAAFA,EAAE;MACnD,IAAI,CAACA,EAAE,CAACC,MAAM,CAACC,SAAS,CAACC,SAAS,CAACC,IAAI,IAAG;QACxC,IAAIA,IAAI,EAAE;UACR,IAAI,CAACC,MAAM,GAAGD,IAAI,CAACE,GAAG;QACxB;MACF,CAAC,CAAC;IACJ;IAEAC,QAAQA,CAAA;MACN;MAEA,IAAI,CAACC,eAAe,GAAG,IAAI,CAACT,GAAG,CAACU,UAAU,CAAC,OAAO,EAAEC,GAAG,IAAIA,GAAG,CAACC,KAAK,CAAC,OAAO,EAAE,IAAI,EAAE,IAAI,CAACN,MAAM,CAAC,CAAC;MACjG,IAAI,CAACO,UAAU,GAAG,IAAI,CAACJ,eAAe,CAACK,eAAe,EAAE,CAACC,IAAI,CAC3DhC,GAAG,CAACiC,OAAO,IAAG;QACZ,OAAOA,OAAO,CAACjC,GAAG,CAACkC,CAAC,IAAG;UACrB,MAAMC,IAAI,GAAGD,CAAC,CAACE,OAAO,CAACC,GAAG,CAACF,IAAI,EAAU;UACzC,MAAMG,EAAE,GAAGJ,CAAC,CAACE,OAAO,CAACC,GAAG,CAACC,EAAE;UAC3B,OAAO;YAAEA,EAAE;YAAE,GAAGH;UAAI,CAAE;QACxB,CAAC,CAAC;MACJ,CAAC,CAAC,CACH;IACH;IAEAI,UAAUA,CAACC,IAAI;MACb,MAAMH,GAAG,GAAG,IAAI,CAACpB,GAAG,CAACoB,GAAG,CAAC,SAASG,IAAI,CAACF,EAAE,EAAE,CAAC;MAC5CD,GAAG,CAACI,MAAM,EAAE;IACd;IAEAC,QAAQA,CAACC,CAAS;MAChB,MAAMH,IAAI,GAAG,IAAIzC,IAAI,CAAC4C,CAAC,CAACpC,KAAK,CAACqC,MAAM,EAAED,CAAC,CAACpC,KAAK,CAACsC,wBAAwB,EAAEF,CAAC,CAACpC,KAAK,CAACuC,iBAAiB,EAC/FH,CAAC,CAACpC,KAAK,CAACwC,QAAQ,EAAEJ,CAAC,CAACpC,KAAK,CAACyC,eAAe,EAAEL,CAAC,CAACpC,KAAK,CAAC0C,gBAAgB,EAAEN,CAAC,CAACpC,KAAK,CAAC2C,aAAa,EAAEP,CAAC,CAACpC,KAAK,CAAC4C,aAAa,EAAE,IAAI,CAAC5B,MAAM,CAAC;MAEjI,MAAMY,IAAI,GAAGiB,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,SAAS,CAACd,IAAI,CAAC,CAAC;MAE7C,IAAI,CAACd,eAAe,CAAC6B,GAAG,CAACpB,IAAI,CAAC;MAE9BQ,CAAC,CAACa,KAAK,EAAE;IACX;;;;SA1CWvD,cAAc","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}