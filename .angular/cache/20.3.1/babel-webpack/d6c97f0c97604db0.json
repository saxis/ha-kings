{"ast":null,"code":"import { __esDecorate, __runInitializers } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { Obligation } from '../../models/obligation.model';\nimport { map } from 'rxjs/operators';\nlet ObligationsComponent = (() => {\n  let _classDecorators = [Component({\n    selector: 'app-obligations',\n    templateUrl: './obligations.component.html',\n    styleUrls: ['./obligations.component.sass']\n  })];\n  let _classDescriptor;\n  let _classExtraInitializers = [];\n  let _classThis;\n  var ObligationsComponent = class {\n    static {\n      _classThis = this;\n    }\n    static {\n      const _metadata = typeof Symbol === \"function\" && Symbol.metadata ? Object.create(null) : void 0;\n      __esDecorate(null, _classDescriptor = {\n        value: _classThis\n      }, _classDecorators, {\n        kind: \"class\",\n        name: _classThis.name,\n        metadata: _metadata\n      }, null, _classExtraInitializers);\n      ObligationsComponent = _classThis = _classDescriptor.value;\n      if (_metadata) Object.defineProperty(_classThis, Symbol.metadata, {\n        enumerable: true,\n        configurable: true,\n        writable: true,\n        value: _metadata\n      });\n      __runInitializers(_classThis, _classExtraInitializers);\n    }\n    constructor(afs, as) {\n      this.afs = afs;\n      this.as = as;\n      this.as.afAuth.authState.subscribe(user => {\n        if (user) {\n          this.userId = user.uid;\n        }\n      });\n    }\n    ngOnInit() {\n      this.obligationsCollection = this.afs.collection('obligations', ref => ref.where('owner', '==', this.userId));\n      this.obligationsList = this.obligationsCollection.snapshotChanges().pipe(map(actions => {\n        return actions.map(a => {\n          const data = a.payload.doc.data();\n          const id = a.payload.doc.id;\n          return {\n            id,\n            ...data\n          };\n        });\n      }));\n    }\n    removeObligation(obligation) {\n      const doc = this.afs.doc(`obligations/${obligation.id}`);\n      doc.delete();\n    }\n    payNow(u, obligation) {\n      console.log(u.value.amountPaid);\n      console.log(obligation);\n      const doc = this.afs.doc(`obligations/${obligation.id}`);\n      doc.update({\n        paid: true,\n        amountPaid: u.value.amountPaid\n      });\n      // console.log('Clicking this should decrease the earnings total by the desires amount');\n    }\n    onSubmit(f) {\n      const obligation = new Obligation(f.value.biller, f.value.dueDate, f.value.datePaid, f.value.expectedAmount, f.value.amountPaid, false, this.userId);\n      const data = JSON.parse(JSON.stringify(obligation));\n      this.obligationsCollection.add(data);\n      f.reset();\n    }\n  };\n  return ObligationsComponent = _classThis;\n})();\nexport { ObligationsComponent };","map":{"version":3,"names":["Component","Obligation","map","ObligationsComponent","selector","templateUrl","styleUrls","__esDecorate","_classDescriptor","value","_classThis","_classDecorators","kind","name","metadata","_metadata","_classExtraInitializers","__runInitializers","constructor","afs","as","afAuth","authState","subscribe","user","userId","uid","ngOnInit","obligationsCollection","collection","ref","where","obligationsList","snapshotChanges","pipe","actions","a","data","payload","doc","id","removeObligation","obligation","delete","payNow","u","console","log","amountPaid","update","paid","onSubmit","f","biller","dueDate","datePaid","expectedAmount","JSON","parse","stringify","add","reset"],"sources":["/Users/saxis/dev/angular_projects/ha-kings/src/app/obligations/obligations.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { Obligation } from '../../models/obligation.model';\nimport { NgForm } from '@angular/forms';\nimport { AngularFirestore, AngularFirestoreCollection } from '@angular/fire/firestore';\nimport { Observable } from 'rxjs';\nimport { AuthService } from '../core/auth.service';\nimport { map } from 'rxjs/operators';\n\n@Component({\n  selector: 'app-obligations',\n  templateUrl: './obligations.component.html',\n  styleUrls: ['./obligations.component.sass']\n})\nexport class ObligationsComponent implements OnInit {\n  obligationsCollection: AngularFirestoreCollection<Obligation>;\n  obligationsList: Observable<Obligation[]>;\n  userId: string;\n  amountPaid: number;\n\n  constructor(private afs: AngularFirestore, private as: AuthService) {\n    this.as.afAuth.authState.subscribe(user => {\n      if (user) {\n        this.userId = user.uid;\n      }\n    });\n  }\n\n  ngOnInit() {\n    this.obligationsCollection = this.afs.collection('obligations', ref => ref.where('owner', '==', this.userId));\n    this.obligationsList = this.obligationsCollection.snapshotChanges().pipe(\n      map(actions => {\n        return actions.map(a => {\n          const data = a.payload.doc.data() as Obligation;\n          const id = a.payload.doc.id;\n          return { id, ...data };\n        });\n      })\n    );\n  }\n\n  removeObligation(obligation) {\n    const doc = this.afs.doc(`obligations/${obligation.id}`);\n    doc.delete();\n  }\n\n  payNow(u: NgForm, obligation) {\n    console.log(u.value.amountPaid);\n    console.log(obligation);\n    const doc = this.afs.doc(`obligations/${obligation.id}`);\n    doc.update({paid: true, amountPaid: u.value.amountPaid });\n    // console.log('Clicking this should decrease the earnings total by the desires amount');\n  }\n\n  onSubmit(f: NgForm) {\n    const obligation = new Obligation(f.value.biller, f.value.dueDate, f.value.datePaid,\n      f.value.expectedAmount, f.value.amountPaid, false, this.userId);\n\n    const data = JSON.parse(JSON.stringify(obligation));\n\n    this.obligationsCollection.add(data);\n\n    f.reset();\n  }\n\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}